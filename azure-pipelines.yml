# ASP.NET Core
# Build and test ASP.NET Core projects targeting .NET Core.
# Add steps that run tests, create a NuGet package, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/dotnet-core

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

variables:
  buildConfiguration: 'Release'
  solutionPath: 'StoreApplication'

steps:
- script: dotnet build --configuration $(buildConfiguration) $(solutionPath)
  displayName: 'dotnet build $(buildConfiguration) $(solutionPath)'
# ...
# do this after other tasks such as building
- task: DotNetCoreCLI@2
  inputs:
    command: test
    projects: 'StoreApplication/StoreApplication.Test/StoreApplication.Test.csproj'
    arguments: '--configuration $(buildConfiguration)'
# - task: NuGetCommand@2
  # inputs:
  #   command: pack
  #   packagesToPack: 'StoreApplication/StoreApplication.WebUI/StoreApplication.WebUI.csproj -IncludeReferencedProjects'
# - task: NuGetCommand@2
#   inputs:
#     command: push
#     nuGetFeedType: external
#     publishFeedCredentials: '<Name of the NuGet service connection>'
#     versioningScheme: byEnvVar
#     versionEnvVar: <VersionVariableName>